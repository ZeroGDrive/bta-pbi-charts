{
  "dataRoles": [
    {
      "displayName": "Date/Time",
      "name": "xAxis",
      "kind": "Grouping",
      "description": "Date or time field for X-axis"
    },
    {
      "displayName": "Legend",
      "name": "legend",
      "kind": "Grouping",
      "description": "Optional field to split into series (like native Power BI charts)"
    },
    {
      "displayName": "Value",
      "name": "values",
      "kind": "Measure",
      "description": "Numeric value (e.g., closing price)"
    }
  ],
  "tooltips": {
    "supportedTypes": {
      "default": true,
      "canvas": true
    },
    "roles": ["tooltips"]
  },
  "objects": {
    "bollingerSettings": {
      "displayName": "Bollinger Bands",
      "properties": {
        "period": {
          "displayName": "Period (N)",
          "description": "Number of periods for SMA calculation",
          "type": { "numeric": true }
        },
        "stdDeviation": {
          "displayName": "Std Deviations (K)",
          "description": "Standard deviation multiplier",
          "type": { "numeric": true }
        },
        "showPriceLine": {
          "displayName": "Show Price Line",
          "type": { "bool": true }
        },
        "showMiddleBand": {
          "displayName": "Show Middle Band (SMA)",
          "type": { "bool": true }
        },
        "showBands": {
          "displayName": "Show Upper/Lower Bands",
          "type": { "bool": true }
        },
        "showBandFill": {
          "displayName": "Show Band Fill",
          "type": { "bool": true }
        },
        "priceLineColor": {
          "displayName": "Price Line Color",
          "type": { "fill": { "solid": { "color": true } } }
        },
        "middleBandColor": {
          "displayName": "Middle Band Color",
          "type": { "fill": { "solid": { "color": true } } }
        },
        "upperBandColor": {
          "displayName": "Upper Band Color",
          "type": { "fill": { "solid": { "color": true } } }
        },
        "lowerBandColor": {
          "displayName": "Lower Band Color",
          "type": { "fill": { "solid": { "color": true } } }
        },
        "bandFillColor": {
          "displayName": "Band Fill Color",
          "type": { "fill": { "solid": { "color": true } } }
        },
        "bandFillOpacity": {
          "displayName": "Band Fill Opacity",
          "type": { "numeric": true }
        },
        "lineWidth": {
          "displayName": "Line Width",
          "type": { "numeric": true }
        }
      }
    },
    "tooltipSettings": {
      "displayName": "Tooltips",
      "properties": {
        "enabled": {
          "displayName": "Enabled",
          "type": { "bool": true }
        },
        "style": {
          "displayName": "Style",
          "type": {
            "enumeration": [
              { "value": "powerbi", "displayName": "Power BI" },
              { "value": "custom", "displayName": "Custom" }
            ]
          }
        },
        "theme": {
          "displayName": "Theme",
          "type": {
            "enumeration": [
              { "value": "light", "displayName": "Light" },
              { "value": "dark", "displayName": "Dark" }
            ]
          }
        },
        "backgroundColor": {
          "displayName": "Background",
          "type": { "fill": { "solid": { "color": true } } }
        },
        "textColor": {
          "displayName": "Text Color",
          "type": { "fill": { "solid": { "color": true } } }
        },
        "borderColor": {
          "displayName": "Border Color",
          "type": { "fill": { "solid": { "color": true } } }
        },
        "borderRadius": {
          "displayName": "Border Radius",
          "type": { "numeric": true }
        },
        "shadow": {
          "displayName": "Shadow",
          "type": { "bool": true }
        },
        "maxWidth": {
          "displayName": "Max Width",
          "type": { "numeric": true }
        },
        "showColorSwatch": {
          "displayName": "Show Color Swatch",
          "type": { "bool": true }
        }
      }
    },
    "legend": {
      "displayName": "Legend",
      "properties": {
        "position": {
          "displayName": "Position",
          "type": {
            "enumeration": [
              { "value": "topLeft", "displayName": "Top Left" },
              { "value": "topCenter", "displayName": "Top Center" },
              { "value": "topRight", "displayName": "Top Right" },
              { "value": "topLeftStacked", "displayName": "Top Left (Stacked)" },
              { "value": "topRightStacked", "displayName": "Top Right (Stacked)" },
              { "value": "centerLeft", "displayName": "Center Left" },
              { "value": "centerRight", "displayName": "Center Right" },
              { "value": "bottomLeft", "displayName": "Bottom Left" },
              { "value": "bottomCenter", "displayName": "Bottom Center" },
              { "value": "bottomRight", "displayName": "Bottom Right" }
            ]
          }
        },
        "fontSize": {
          "displayName": "Font Size",
          "type": { "formatting": { "fontSize": true } }
        },
        "maxItems": {
          "displayName": "Max Items",
          "description": "Maximum number of legend items to display",
          "type": { "numeric": true }
        }
      }
    },
    "xAxisSettings": {
      "displayName": "X-Axis",
      "properties": {
        "show": {
          "displayName": "Show X-Axis",
          "type": { "bool": true }
        },
        "fontSize": {
          "displayName": "Font Size",
          "type": { "formatting": { "fontSize": true } }
        },
        "rotateLabels": {
          "displayName": "Rotate Labels",
          "description": "Control X-axis label rotation",
          "type": {
            "enumeration": [
              { "value": "auto", "displayName": "Auto" },
              { "value": "always", "displayName": "Always" },
              { "value": "never", "displayName": "Never" }
            ]
          }
        }
      }
    },
    "yAxisSettings": {
      "displayName": "Y-Axis",
      "properties": {
        "show": {
          "displayName": "Show Y-Axis",
          "type": { "bool": true }
        },
        "fontSize": {
          "displayName": "Font Size",
          "type": { "formatting": { "fontSize": true } }
        }
      }
    },
    "textSizes": {
      "displayName": "Text Sizes",
      "description": "Manual font size overrides (0 = auto/responsive)",
      "properties": {
        "xAxisFontSize": {
          "displayName": "X-Axis Font Size",
          "description": "0 = auto, 8-32 = manual size",
          "type": { "formatting": { "fontSize": true } }
        },
        "yAxisFontSize": {
          "displayName": "Y-Axis Font Size",
          "description": "0 = auto, 8-32 = manual size",
          "type": { "formatting": { "fontSize": true } }
        },
        "legendFontSize": {
          "displayName": "Legend Font Size",
          "description": "0 = auto, 8-32 = manual size",
          "type": { "formatting": { "fontSize": true } }
        },
        "panelTitleFontSize": {
          "displayName": "Panel Title Font Size",
          "description": "0 = auto, 8-32 = manual size",
          "type": { "formatting": { "fontSize": true } }
        }
      }
    }
  },
  "dataViewMappings": [
    {
      "conditions": [
        {
          "xAxis": { "max": 1 },
          "legend": { "max": 1 },
          "values": { "max": 1 }
        }
      ],
      "categorical": {
        "categories": {
          "select": [
            { "for": { "in": "xAxis" } },
            { "for": { "in": "legend" } }
          ],
          "dataReductionAlgorithm": {
            "top": { "count": 30000 }
          }
        },
        "values": {
          "select": [
            { "for": { "in": "values" } }
          ]
        }
      }
    }
  ],
  "privileges": []
}
