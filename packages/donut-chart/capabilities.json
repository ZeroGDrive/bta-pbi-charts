{
  "dataRoles": [
    {
      "displayName": "Legend",
      "name": "legend",
      "kind": "Grouping",
      "description": "Slice categories (like native Power BI Donut/Pie)"
    },
    {
      "displayName": "Group",
      "name": "group",
      "kind": "Grouping",
      "description": "Splits the donut into small multiples (one donut per group)"
    },
    {
      "displayName": "Values",
      "name": "values",
      "kind": "Measure",
      "description": "Value for each slice"
    }
  ],
  "tooltips": {
    "supportedTypes": {
      "default": true,
      "canvas": true
    },
    "roles": ["tooltips"]
  },
  "objects": {
    "categoryColors": {
      "displayName": "Data Colors",
      "properties": {
        "fill": {
          "displayName": "Color",
          "type": { "fill": { "solid": { "color": true } } }
        }
      }
    },
    "tooltipSettings": {
      "displayName": "Tooltips",
      "properties": {
        "enabled": {
          "displayName": "Enabled",
          "type": { "bool": true }
        },
        "style": {
          "displayName": "Style",
          "type": {
            "enumeration": [
              { "value": "powerbi", "displayName": "Power BI" },
              { "value": "custom", "displayName": "Custom" }
            ]
          }
        },
        "theme": {
          "displayName": "Theme",
          "type": {
            "enumeration": [
              { "value": "light", "displayName": "Light" },
              { "value": "dark", "displayName": "Dark" }
            ]
          }
        },
        "backgroundColor": {
          "displayName": "Background",
          "type": { "fill": { "solid": { "color": true } } }
        },
        "textColor": {
          "displayName": "Text Color",
          "type": { "fill": { "solid": { "color": true } } }
        },
        "borderColor": {
          "displayName": "Border Color",
          "type": { "fill": { "solid": { "color": true } } }
        },
        "borderRadius": {
          "displayName": "Border Radius",
          "type": { "numeric": true }
        },
        "shadow": {
          "displayName": "Shadow",
          "type": { "bool": true }
        },
        "maxWidth": {
          "displayName": "Max Width",
          "type": { "numeric": true }
        },
        "showColorSwatch": {
          "displayName": "Show Color Swatch",
          "type": { "bool": true }
        }
      }
    },
    "customColors": {
      "displayName": "Custom Colors",
      "properties": {
        "useCustomColors": {
          "displayName": "Use Custom Colors",
          "description": "Enable custom colors for each data category",
          "type": { "bool": true }
        },
        "colorList": {
          "displayName": "Colors",
          "description": "Comma-separated hex colors (e.g., #ff0000, #00ff00, #0000ff)",
          "type": { "text": true }
        }
      }
    },
    "colorScheme": {
      "displayName": "Color Scheme",
      "properties": {
        "scheme": {
          "displayName": "Color Scheme",
          "type": {
            "enumeration": [
              { "value": "blues", "displayName": "Blues" },
              { "value": "greens", "displayName": "Greens" },
              { "value": "reds", "displayName": "Reds" },
              { "value": "purples", "displayName": "Purples" },
              { "value": "oranges", "displayName": "Oranges" },
              { "value": "teals", "displayName": "Teals" },
              { "value": "pinks", "displayName": "Pinks" },
              { "value": "warm", "displayName": "Warm" },
              { "value": "rainbow", "displayName": "Rainbow" },
              { "value": "pastel", "displayName": "Pastel" },
              { "value": "vibrant", "displayName": "Vibrant" }
            ]
          }
        }
      }
    },
    "legend": {
      "displayName": "Legend",
      "properties": {
        "position": {
          "displayName": "Position",
          "type": {
            "enumeration": [
              { "value": "topLeft", "displayName": "Top Left" },
              { "value": "topCenter", "displayName": "Top Center" },
              { "value": "topRight", "displayName": "Top Right" },
              { "value": "topLeftStacked", "displayName": "Top Left (Stacked)" },
              { "value": "topRightStacked", "displayName": "Top Right (Stacked)" },
              { "value": "centerLeft", "displayName": "Center Left" },
              { "value": "centerRight", "displayName": "Center Right" },
              { "value": "bottomLeft", "displayName": "Bottom Left" },
              { "value": "bottomCenter", "displayName": "Bottom Center" },
              { "value": "bottomRight", "displayName": "Bottom Right" }
            ]
          }
        },
        "fontSize": {
          "displayName": "Font Size",
          "type": { "formatting": { "fontSize": true } }
        },
        "maxItems": {
          "displayName": "Max Items",
          "description": "Maximum number of legend items to display",
          "type": { "numeric": true }
        }
      }
    },
    "donutSettings": {
      "displayName": "Donut Chart",
      "properties": {
        "innerRadiusRatio": {
          "displayName": "Inner Radius",
          "type": { "numeric": true }
        },
        "padAngle": {
          "displayName": "Slice Padding",
          "type": { "numeric": true }
        },
        "cornerRadius": {
          "displayName": "Corner Radius",
          "type": { "numeric": true }
        },
        "roundedCorners": {
          "displayName": "Rounded Corners",
          "type": { "bool": true }
        },
        "showCenter": {
          "displayName": "Show Center",
          "type": { "bool": true }
        },
        "centerLabel": {
          "displayName": "Center Label",
          "type": { "text": true }
        },
        "centerValueMode": {
          "displayName": "Center Value",
          "type": {
            "enumeration": [
              { "value": "total", "displayName": "Total" },
              { "value": "none", "displayName": "None" }
            ]
          }
        },
        "enableHover": {
          "displayName": "Hover Highlight",
          "type": { "bool": true }
        },
        "showZeroSlices": {
          "displayName": "Show Zero Slices",
          "type": { "bool": true }
        }
      }
    },
    "donutLabels": {
      "displayName": "Data Labels",
      "properties": {
        "showLabels": {
          "displayName": "Show Labels",
          "type": { "bool": true }
        },
        "autoFit": {
          "displayName": "Auto Fit",
          "description": "Shrink/hide labels to avoid overflow",
          "type": { "bool": true }
        },
        "minFontSize": {
          "displayName": "Min Font Size",
          "description": "Minimum font size when auto-fitting labels",
          "type": { "numeric": true }
        },
        "overflowToOutside": {
          "displayName": "Overflow To Outside",
          "description": "When labels don't fit inside, render them outside with leader lines",
          "type": { "bool": true }
        },
        "labelMode": {
          "displayName": "Label Content",
          "type": {
            "enumeration": [
              { "value": "category", "displayName": "Category" },
              { "value": "value", "displayName": "Value" },
              { "value": "percent", "displayName": "Percent" },
              { "value": "categoryPercent", "displayName": "Category + Percent" }
            ]
          }
        },
        "labelPosition": {
          "displayName": "Label Position",
          "type": {
            "enumeration": [
              { "value": "inside", "displayName": "Inside" },
              { "value": "outside", "displayName": "Outside" }
            ]
          }
        },
        "minLabelAngle": {
          "displayName": "Min Slice Angle",
          "type": { "numeric": true }
        }
      }
    },
    "textSizes": {
      "displayName": "Text Sizes",
      "properties": {
        "legendFontSize": {
          "displayName": "Legend Font Size",
          "type": { "numeric": true }
        },
        "panelTitleFontSize": {
          "displayName": "Panel Title Font Size",
          "type": { "numeric": true }
        },
        "sliceLabelFontSize": {
          "displayName": "Slice Label Font Size",
          "type": { "numeric": true }
        },
        "centerLabelFontSize": {
          "displayName": "Center Label Font Size",
          "type": { "numeric": true }
        },
        "centerValueFontSize": {
          "displayName": "Center Value Font Size",
          "type": { "numeric": true }
        }
      }
    },
    "smallMultiples": {
      "displayName": "Small Multiples",
      "properties": {
        "spacing": {
          "displayName": "Panel Spacing",
          "type": { "numeric": true }
        },
        "showTitle": {
          "displayName": "Show Panel Titles",
          "type": { "bool": true }
        },
        "titleFontSize": {
          "displayName": "Title Font Size",
          "type": { "formatting": { "fontSize": true } }
        },
        "titleSpacing": {
          "displayName": "Title Spacing",
          "type": { "numeric": true }
        }
      }
    }
  },
  "dataViewMappings": [
    {
      "conditions": [
        {
          "legend": { "max": 1 },
          "group": { "max": 0 },
          "values": { "max": 1 }
        }
      ],
      "categorical": {
        "categories": {
          "select": [
            { "for": { "in": "legend" } }
          ]
        },
        "values": {
          "select": [
            { "for": { "in": "values" } }
          ]
        }
      }
    },
    {
      "conditions": [
        {
          "legend": { "max": 1 },
          "group": { "min": 1, "max": 1 },
          "values": { "max": 1 }
        }
      ],
      "categorical": {
        "categories": {
          "select": [
            { "for": { "in": "legend" } }
          ]
        },
        "values": {
          "group": {
            "by": "group",
            "select": [
              { "for": { "in": "values" } }
            ]
          }
        }
      }
    }
  ],
  "supportsHighlight": true,
  "privileges": []
}
